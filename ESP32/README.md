# 数字风铃 (Digital Wind Chime) - ESP32 LVGL版本

## 项目概述

这是一个基于ESP32和LVGL的数字艺术装置，将全球互联网中的实时数据流转化为视听体验。项目灵感来源于传统风铃，但使用数字技术来"聆听"世界的脉搏。

## 🚀 快速开始

### 推荐使用简化版本
由于编译复杂性，推荐使用 `ESP32_Simple.ino` 作为起始版本：

1. **打开 ESP32_Simple.ino** - 这是一个经过简化的可编译版本
2. **配置硬件** - 确保ESP32-S3和显示屏连接正确
3. **编译上传** - 使用Arduino IDE编译并上传到设备
4. **体验效果** - 设备启动后会自动开始数字风铃演示

## 功能特性

### 🎨 视觉效果
- **深色极简界面**: 营造沉浸式的观赏体验
- **动态粒子系统**: 每个数据事件触发独特的粒子效果
- **涟漪动画**: 数据事件产生扩散的涟漪效果
- **中心球体**: 会根据事件强度和风速产生动态变化
- **实时信息显示**: 右下角显示最新的数据事件信息

### 🔊 音频反馈
- **事件音效**: 不同数据源触发不同音调的声音
  - GitHub事件: 880Hz (清脆金属声)
  - Wikipedia事件: 659Hz (温暖木质声)  
  - 天气事件: 523Hz (自然风声)
- **环境音效**: 风速影响背景音调
- **音量控制**: 可调节音量或静音

### 📊 数据源模拟
- **GitHub事件**: 模拟全球代码提交
- **Wikipedia编辑**: 模拟知识库更新
- **天气数据**: 模拟风速和温度变化

## 界面导航

### 主界面 (传感器数据)
- **Wind Chime**: 进入数字风铃界面
- **Control**: 进入控制面板
- **More**: 进入扩展功能
- **Back**: 返回上级

### 数字风铃界面
- **Back**: 返回主界面
- **Control**: 进入控制面板
- 实时显示数据事件的视觉和音频效果

### 控制面板
- **手动触发事件**: 测试不同类型的数据事件
- **自动模拟**: 启动/停止自动数据模拟
- **音量控制**: 调节音频反馈音量
- **状态显示**: 显示当前操作状态

## 技术实现

### 硬件要求
- ESP32-S3开发板
- 480x480 RGB显示屏
- 触摸屏控制器
- 蜂鸣器 (连接到GPIO 42)

### 软件架构
- **LVGL**: 图形用户界面库
- **Arduino框架**: 主要开发环境
- **模块化设计**: 分离的UI组件和数据处理

### 文件结构
```
├── ESP32.ino                 # 主程序文件
├── src/
│   ├── UI/
│   │   ├── WindChime.c/h     # 数字风铃主界面
│   │   ├── ControlPanel.c/h  # 控制面板
│   │   ├── DataSimulator.c/h # 数据模拟器
│   │   ├── AudioFeedback.c/h # 音频反馈系统
│   │   └── ...
│   ├── Display/              # 显示驱动
│   └── Fonts/                # 字体文件
├── ui.h                      # UI头文件集合
└── README.md                 # 项目说明
```

## 使用说明

### ESP32_Simple.ino 版本
1. **启动**: 设备启动后自动进入数字风铃界面
2. **观赏**: 观察中心球体的颜色变化和信息显示
3. **切换**: 按下按钮(GPIO 38)可在风铃界面和传感器界面间切换
4. **音效**: 每个模拟事件都会触发简单的蜂鸣声
5. **自动演示**: 系统会自动模拟GitHub、Wikipedia和天气事件

### 完整版本 (需要调试)
如果你想使用完整的粒子效果和复杂界面，可以尝试修复以下文件中的编译问题：
- `src/UI/WindChime.c` - 主要的风铃界面
- `src/UI/ControlPanel.c` - 控制面板
- `src/UI/AudioFeedback.c` - 音频反馈系统

## 艺术理念

这个项目体现了"无用之用"的哲学思考：
- **非功利性**: 不解决实际问题，纯粹为了美学体验
- **数据诗学**: 将抽象的数据流转化为具象的感官体验
- **全球连接**: 通过模拟全球数据流，感受世界的脉搏
- **禅意观察**: 用户只能观察，无法控制，培养静观的心境

## 开发说明

### 编译环境
- Arduino IDE 2.x 或 PlatformIO
- ESP32 开发板支持包 (3.x)
- LVGL库 (版本 9.x)
- Arduino_GFX_Library
- 其他依赖库见项目中的include

### 版本说明
- **ESP32_Simple.ino**: 简化版本，确保可以编译通过
- **ESP32.ino**: 完整版本，包含所有功能但可能需要调试
- **src/UI/**: 包含所有UI组件的源代码

### 已知问题和解决方案
1. **字体问题**: 使用了不存在的字体，已修改为标准字体
2. **颜色初始化**: 静态数组初始化问题，改用LV_COLOR_MAKE宏
3. **Lambda表达式**: C语言不支持，改用函数指针
4. **LEDC API**: ESP32新版本API变化，简化为基本GPIO控制

### 自定义配置
- 修改 `BUZZER_PIN` (默认GPIO 42) 来适配你的硬件
- 调整事件模拟间隔和颜色主题
- 修改屏幕分辨率和触摸配置

### 扩展功能建议
- 添加WiFi连接获取真实API数据
- 集成更多数据源 (Twitter, Stock Market等)
- 添加SD卡存储和数据回放
- 实现Web配置界面
- 添加更多视觉效果和动画

## 故障排除

### 编译错误
1. **字体未定义**: 确保使用LVGL内置字体，如 `lv_font_montserrat_14`
2. **颜色函数错误**: 使用 `lv_color_make(r,g,b)` 而不是 `lv_color_hex()`
3. **Lambda表达式错误**: C语言不支持，需要使用函数指针

### 运行时问题
1. **屏幕黑屏**: 检查显示屏连接和背光设置
2. **触摸不响应**: 验证触摸屏I2C连接和地址配置
3. **无音效**: 检查蜂鸣器连接和GPIO配置

### 性能优化
1. **降低帧率**: 修改动画定时器间隔
2. **减少粒子数量**: 调整MAX_PARTICLES常量
3. **简化视觉效果**: 使用基本形状而非复杂绘制

## 项目文件说明

```
├── ESP32_Simple.ino          # 推荐使用的简化版本 ⭐
├── ESP32.ino                 # 完整版本 (需要调试)
├── src/UI/
│   ├── WindChime.c/h         # 完整的风铃界面
│   ├── WindChimeSimple.c/h   # 简化的风铃界面
│   ├── ControlPanel.c/h      # 控制面板
│   ├── DataSimulator.c/h     # 数据模拟器
│   ├── AudioFeedback.c/h     # 音频反馈
│   └── WindChimeConfig.h     # 配置文件
├── ui.h                      # UI头文件集合
├── touch.h                   # 触摸屏驱动
└── README.md                 # 项目说明
```

## 致谢

本项目灵感来源于数字艺术和生成艺术的探索，致敬所有为开源社区贡献的开发者们。

特别感谢：
- LVGL团队提供的优秀GUI库
- Arduino社区的ESP32支持
- 所有开源硬件和软件贡献者

---

*"在数字的风中，我们听见了世界的呼吸"*

## 许可证

本项目采用MIT许可证，欢迎自由使用和修改。